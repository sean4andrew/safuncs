<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Generate Survivor Data — Surv_Gen • safuncs</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Generate Survivor Data — Surv_Gen"><meta name="description" content="Produces survival data that includes rows for every surviving fish based on the starting number of fish and mortality data. To generate survivor data for tanks absent in the input mortality dataframe, specify the arguments tank_without_mort and trt_without_mort. To generate survivor data with tank specific starting numbers of fish, input a dataframe into the argument starting_fish_count instead of a single value; details in Arguments."><meta property="og:description" content="Produces survival data that includes rows for every surviving fish based on the starting number of fish and mortality data. To generate survivor data for tanks absent in the input mortality dataframe, specify the arguments tank_without_mort and trt_without_mort. To generate survivor data with tank specific starting numbers of fish, input a dataframe into the argument starting_fish_count instead of a single value; details in Arguments."><meta property="og:image" content="https://sean4andrew.github.io/safuncs/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">safuncs</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">2.0.2</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/safuncs.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/sean4andrew/safuncs/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Generate Survivor Data</h1>
      <small class="dont-index">Source: <a href="https://github.com/sean4andrew/safuncs/blob/master/R/safuncs.R" class="external-link"><code>R/safuncs.R</code></a></small>
      <div class="d-none name"><code>Surv_Gen.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Produces survival data that includes rows for every surviving fish based on the starting number of fish and mortality data. To generate survivor data for tanks absent in the input mortality dataframe, specify the arguments <code>tank_without_mort</code> and <code>trt_without_mort</code>. To generate survivor data with tank specific starting numbers of fish, input a dataframe into the argument <code>starting_fish_count</code> instead of a single value; details in <b>Arguments</b>.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">Surv_Gen</span><span class="op">(</span></span>
<span>  <span class="va">mort_db</span>,</span>
<span>  <span class="va">starting_fish_count</span>,</span>
<span>  <span class="va">last_tte</span>,</span>
<span>  tank_without_mort <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  trt_without_mort <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  output_prism <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  output_prism_date <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-mort-db">mort_db<a class="anchor" aria-label="anchor" href="#arg-mort-db"></a></dt>
<dd><p>A mort dataframe as described in <b>Details</b>.</p></dd>


<dt id="arg-starting-fish-count">starting_fish_count<a class="anchor" aria-label="anchor" href="#arg-starting-fish-count"></a></dt>
<dd><p>Value representing the starting number of fish for every tank. Alternatively, a dataframe containing the columns "Trt.ID", "Tank.ID", and "starting_fish_count" to allow for different fish starting numbers per tank.</p></dd>


<dt id="arg-last-tte">last_tte<a class="anchor" aria-label="anchor" href="#arg-last-tte"></a></dt>
<dd><p>Value representing the time-to-event the fish survived to, assigned to every row of survivor data generated.</p></dd>


<dt id="arg-tank-without-mort">tank_without_mort<a class="anchor" aria-label="anchor" href="#arg-tank-without-mort"></a></dt>
<dd><p>A vector of strings specifying the tanks absent from <code>mort_db</code>; used to generate survivor data for those tanks. Argument ignored if <code>starting_fish_count</code> is a dataframe.</p></dd>


<dt id="arg-trt-without-mort">trt_without_mort<a class="anchor" aria-label="anchor" href="#arg-trt-without-mort"></a></dt>
<dd><p>A vector of strings corresponding to <code>tank_without_mort</code>. Keep their order the same. Argument ignored if <code>starting_fish_count</code> is a dataframe.</p></dd>


<dt id="arg-output-prism">output_prism<a class="anchor" aria-label="anchor" href="#arg-output-prism"></a></dt>
<dd><p>Whether to generate and save a prism ready survival csv. Defaults to FALSE.</p></dd>


<dt id="arg-output-prism-date">output_prism_date<a class="anchor" aria-label="anchor" href="#arg-output-prism-date"></a></dt>
<dd><p>The starting date to be used in the prism file. Please specify date in "dd-Mmm-yyyy" syntax (e.g. "08-Aug-2024").</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A dataframe produced by combining the input mort data and generated rows of survivor data.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>The mort dataframe supplied as input should consist of the following 4 columns at minimum:</p><ul><li><p>"Trt.ID" = Labels for treatment groups in the study.</p></li>
<li><p>"Tank.ID" = Labels for tanks in the study (each tank must have a unique label).</p></li>
<li><p>"TTE" = Time to Event. Event could be fish death or being sampled and removed depending on "Status".</p></li>
<li><p>"Status" = Value indicating what happened at TTE. 1 for dead fish, 0 for those sampled and removed.</p></li>
</ul><p>Each row should represent one fish.</p>
<p>For an example dataframe, execute <code>data(mort_db_ex)</code> and view.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><a href="https://sean4andrew.github.io/safuncs/reference/Surv_Gen.html">Link</a> for executed <b>Examples</b> which includes any figure outputs.</p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># First, we load an example mortality database available from the safuncs package</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">mort_db_ex</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Next, we input this data into Surv_Gen() as well as the study details to generate</span></span></span>
<span class="r-in"><span><span class="co"># entries (rows) for survivors in the output - a "complete" dataframe for further</span></span></span>
<span class="r-in"><span><span class="co"># survival analysis and data visualization.</span></span></span>
<span class="r-in"><span><span class="va">Surv_Data_Output</span> <span class="op">=</span> <span class="fu">Surv_Gen</span><span class="op">(</span>mort_db <span class="op">=</span> <span class="va">mort_db_ex</span>,</span></span>
<span class="r-in"><span>                   starting_fish_count <span class="op">=</span> <span class="fl">100</span>,</span></span>
<span class="r-in"><span>                   last_tte <span class="op">=</span> <span class="fl">54</span>,</span></span>
<span class="r-in"><span>                   tank_without_mort <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"C99"</span>, <span class="st">"C100"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                   trt_without_mort <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"A"</span>, <span class="st">"B"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "Your total number of tanks is: 14"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "Your total number of treatment groups is: 4"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "Your total number of fish in the output data is: 1400"</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Below, the bottom 5 rows of the output is displayed to show the rows of survivor</span></span></span>
<span class="r-in"><span><span class="co"># data generated.</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">tail</a></span><span class="op">(</span><span class="va">Surv_Data_Output</span>, n <span class="op">=</span> <span class="fl">5</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      Tank.ID Trt.ID TTE Status</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1396    C100      B  54      0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1397    C100      B  54      0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1398    C100      B  54      0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1399    C100      B  54      0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1400    C100      B  54      0</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Below is another example, this time showing how to specify tank-specific fish</span></span></span>
<span class="r-in"><span><span class="co"># numbers. First, create the database containing information on the starting fish</span></span></span>
<span class="r-in"><span><span class="co"># counts for the different tanks. You must include all tanks that are in your mort</span></span></span>
<span class="r-in"><span><span class="co"># database to get a proper output. For the example below, we will later trim down</span></span></span>
<span class="r-in"><span><span class="co"># the mort database to only 4 tanks for simplicity. Use these 3 column names:</span></span></span>
<span class="r-in"><span><span class="co"># starting_fish_count, Tank.ID and Trt.ID.</span></span></span>
<span class="r-in"><span><span class="va">count_db</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>starting_fish_count <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">100</span>, <span class="fl">100</span>, <span class="fl">120</span>, <span class="fl">120</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                      Tank.ID <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"C1"</span>, <span class="st">"C6"</span>, <span class="st">"C5"</span>, <span class="st">"C8"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                      Trt.ID <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"B"</span>, <span class="st">"B"</span>, <span class="st">"D"</span>, <span class="st">"D"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">filtered_mort_db</span> <span class="op">=</span> <span class="va">mort_db_ex</span><span class="op">[</span><span class="va">mort_db_ex</span><span class="op">$</span><span class="va">Tank.ID</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"C1"</span>, <span class="st">"C6"</span>, <span class="st">"C5"</span>, <span class="st">"C8"</span><span class="op">)</span>,<span class="op">]</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># We then use 'count_db' as input to the argument 'starting_fish_count' in Surv_Gen():</span></span></span>
<span class="r-in"><span><span class="va">Surv_Data_Output</span> <span class="op">=</span> <span class="fu">Surv_Gen</span><span class="op">(</span>mort_db <span class="op">=</span> <span class="va">filtered_mort_db</span>,</span></span>
<span class="r-in"><span>                            starting_fish_count <span class="op">=</span> <span class="va">count_db</span>,</span></span>
<span class="r-in"><span>                            last_tte <span class="op">=</span> <span class="fl">54</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "Your total number of tanks is: 4"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "Your total number of treatment groups is: 2"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "Your total number of fish in the output data is: 440"</span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Sean Andrew.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

